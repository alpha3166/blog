# i文庫S・i文庫HDのnosyncフォルダ

2013-11-16作成

i文庫S/i文庫HDのフォルダの中に「nosync」という名前の“フォルダみたいなもの”があります。アイコンはフォルダと同じですが、種類が「link」となっていて、これ何だろうなーと昔から思っていたものの、深く考えずにスルーしていました。
[[attached(1,center)]]

ググってみると、linkというのはi文庫独自の“シンボリックリンクみたいなもの”のようです。実体は「nosync.link」という名前のプレーンテキストで、中身は
/var/mobile/Applications/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/Library/Caches/nosync
というパスが一行だけ書かれています。xxの部分は実際には16進数表記されたUUIDです。行末に改行コードはありません。
[[attached(2,center)]]

自分で似たような.linkファイルを作ってiTunesのファイル共有で転送してやれば、任意の名前で任意の場所にリンクを張ることもできるようです。試しに
/var/mobile/Applications/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/Documents/foo
と書いたmylink.linkを作って置いてみたら、ちゃんとi文庫HDのfooフォルダを指していました。ただし、iOSのアプリはサンドボックス内で動いているらしいので、任意の場所といってもアプリ外のディレクトリは指せないんじゃないかと思います。

さて、ここでポイントになるのは、nosyncフォルダはバックアップや同期の対象にならないということ。(まあ、名前がnosyncですから、だいたい想像はつきますが……)。

試しにi文庫HDに入れていた本のデータをすべてnosyncの下に移してiTunesでバックアップをとってみると、いままで30GB以上あったバックアップフォルダのサイズが、なんと1GB程度にまで小さくなってしまいました(ちなみにバックアップフォルダは「C:\Users\ユーザ名\AppData\Roaming\Apple Computer\MobileSync\Backup」にあります)。もちろん、大量に本を追加したあとのバックアップにかかる時間も大幅に削減できます。

iOSデバイスを複数台もっていて、それぞれに本を入れていると、バックアップのサイズもどんどん大きくなっていきます。なので、オリジナルデータを別の場所に確保しているような場合は、nosyncに入れてバックアップ対象から外すのも手かと思います。ただし、機種交換などで復元しても本のデータは戻らないので、手動でもういちどi文庫に転送してやる必要がある点には注意が必要です。

※バージョンメモ
・iTunes 11.1.3.8
・iOS 6.1.3
