---
title: "auに飲み込まれるPCメール"
category: インターネット
update: 2012-10-21 00:00:00 +0900
---

PCメールからauの携帯(@ezweb.ne.jp)にメールを出したのに、なんか相手の反応が無い。おかしいなと思って別経路で確認してみると、なぜかメールは届いておらず、かといってエラーも返ってきていない。もしやと思って相手に聞いてみると、最近au携帯の迷惑メールフィルターを設定していた――、という経験をいままで何度も繰り返しています。私のPCメールは外部のホスティングサーバから出していて、メールアドレスには独自ドメインを使っているのですが、それとauの迷惑メールフィルターはとても相性が悪いようです。

先日、iPhoneを4から5に変えました。そのときキャリアもソフトバンクからauに変えたので、自由になるauのアドレスが1つ手に入りました。そこで、いったいどの設定に引っかかってメールがブロックされているのか、自分で試してみることにしました。

## オススメ設定だとダメ

まず、フィルターを何も設定していない状態では正常にメールが届くことを確認した上で、auの迷惑メールフィルターを「auがオススメするフィルター設定」にします。auのフィルター設定は、

- (1)一括指定受信
- (2)迷惑メールおまかせ規制
- (3)アドレス帳受信設定
- (4)なりすまし規制
- (5)指定拒否リスト設定
- (6)指定受信リスト設定
- (7)指定受信リスト設定(なりすまし・転送メール許可)
- (8)HTMLメール規制
- (9)URLリンク規制
- (10)ウィルスメール規制

がありますが、auのオススメを選ぶと、このうち

- (2)迷惑メールおまかせ規制: レポート通知OFF
- (4)なりすまし規制: 高

の2つが効いた状態になります。なお、別に「拒否通知メール返信設定」というものがありますが、これはデフォルトの「返信する」のままです。ちなみにオススメ設定というのは、「カンタン設定」で『「携帯」「PHS」「PC」メールを受信』にした状態と全く同じです。

さて、この状態でPCメールからauにメールを出すと、案の定どこかに消えてしまいました。拒否通知メールも戻ってきません。ちなみに、この状態でGoogleのGmail(@gmail.com)から出した場合と、Yahoo! JAPAN(@yahoo.co.jp)のメールから出した場合も一緒に試してみたのですが、両方とも問題なく受信できました。となると、やはりホスティングサーバからのメールだけがはじかれていることになります。

## 迷惑メールおまかせ規制にはかからない

どっちの設定にひっかかっているのか確かめるため、一旦フィルターを全て解除し、今度は

- (2)迷惑メールおまかせ規制: レポート通知OFF

だけを設定して試したところ、これは問題なく受信できました。となると「なりすまし規制」が臭い! (まあ、拒否通知メールが戻ってこない時点でうすうす勘付いてはいましたが……)

## なりすまし規制「高」がダメ

ふたたびフィルターを全て解除し、今度は

- (4)なりすまし規制: 高

だけをかけて試します。予想通り、メールは受信されず、拒否通知メールも届きません。次になりすまし規制の「中」と「低」も試してみましたが、こちらは問題なく受信できました。

というわけで、私のメールをブロックしていたのは「なりすまし規制: 高」のフィルターでした。

そこで今度は「なりすまし規制: 高」で「指定受信リスト」にPCメールのアドレスを設定してみましたが、結果はブロック。なりすまし規制に対して指定受信リストでのホワイトリスト指定は効果がありません。

ホワイトリストにはもうひとつ、「指定受信リスト(なりすまし・転送メール許可)」というものがあります。こちらにPCメールのアドレスを設定してみると、OK! 問題なく受信できました。なお、普通の「指定受信リスト」は200件まで設定できますが、「指定受信リスト(なりすまし・転送メール許可)」の方は20件までしか設定できません。

まあ、とりあえず回避方法は分かりました。相手に「なりすまし規制」を「中」以下にしてもらうか、「高」のままなら「指定受信リスト(なりすまし・転送メール許可)」に私のアドレス(またはその一部)を設定してもらうか、の二択です。

## なりすましメールとは？

ところで、そもそも「なりすましメール」とはいったい何でしょうか。そのあたりの説明は、auの「[EZwebへメール送信する際の注意事項](http://www.au.kddi.com/service/email/support/chui/index.html)」というページに載っているのですが、要するに「SPFで認められたIPアドレスじゃ無いアドレスから送られてきたメールはなりすましメールだからね」ということのようです。SPFってなんぞや？ というのは、IPAの「[なりすましメール撲滅に向けたSPF（Sender Policy Framework）導入の手引き](http://www.ipa.go.jp/security/topics/20120523_spf.html)」などにとても分かりやすい説明があるので、そちらを参照してください。

ということは、私のドメインを管理しているDNSサーバにもSPFレコードを追加して、SMTPサーバのIPアドレスを指定してやれば、なりすましメールと見なされることも無くなりそうです。が、実はいまドメイン管理とホスティングは別の会社に依頼していて、かつDNSの方は自分で自由に設定を書き換えられない状況にあり……、とちょっとややこしいことになっているので、まずはここを整理しなければ、という気になってきました。

※更新履歴

- 2012-10-21 誤記を訂正
