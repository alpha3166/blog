# iPhoneにEPWINGの辞書を入れる

2011-06-12作成

私は普段、SIIのSR-G10001という電子辞書を持ち歩いているのですが、昨年iPhone 4を使い始めて以来、使用頻度が激減してしまいました。というのも、iPhoneで文章を読むことが多くなると、辞書を引きたくなっても「右手にiPhone、左手に電子辞書」なんていうのはあまり現実的じゃないので、結果的に「Yahoo!辞書」などを使ってiPhone内で完結させてしまうようになったからです。ただ、朝の混んでる電車だとさすがに帯域が足りないのか、Yahoo!辞書で単語を入力してもなかなか答えが返ってこなかったり、また少し専門的な用語はそもそも載っていなかったりで、やはりオフラインで使える大きめの辞書をiPhoneに入れたくなってきました。しかし、App Storeでそれなりの辞書を買うと数千円クラスですし、iOSでしか使えないコンテンツに大金を払うのも個人的にちょっと抵抗があります。

そんなときにふと思いついたのが、手持ちのEPWING形式の辞書をiPhoneでも使えないのかということ。早速検索すると、EBPocketというEPWINGビューアがあったので、試してみました。

まずはApp Storeから「EBPocket free」をインストールします。
次に辞書を転送するのですが、EBPocketにはFTPサーバが組み込まれていて、Wi-Fi経由でコンテンツを転送することができます。FTPクライアントにWindowsのエクスプローラーを使えば、特に追加のソフトウエアなしで転送できます。
EBPocketを起動し、左下の歯車を押して設定画面を開いたら、「FTPサーバー」を選びます。
転送するファイルのファイル名に日本語が含まれる場合は、「Windows(SJIS)」をオンにしておきます。そうしないと、転送時にエラーが発生して中断してしまうようです。
右上の「開始」を押し、「ネットワークに接続中です.」の表示が出たら、今度はWindowsで側でエクスプローラーを立ち上げ、アドレス欄に
  ftp://192.168.0.1:12345/
のようにEBPocket側のURLを入力します。IPアドレスとポート番号は、EBPocketの画面に表示されているものを指定してください。
うまくつながったら、EBPocketフォルダを開き、この中にEPWINGの辞書をそのままコピーします。
コピー元がCD-ROMドライブの場合は、ドライブごとEBPocketフォルダの中にドラッグ&ドロップしても良いでしょう。
ここで注意が必要なのは、コピー中にiPhoneをロック状態にしないこと。ロックするとFTPサーバも落ちてしまうらしく、そこで通信が途切れてしまいます。あらかじめiPhoneの「設定」→「一般」→「自動ロック」を「しない」にしておくか、あるいは転送中は画面をタップし続けて自動ロックがかからないようにします。
転送が終わったら、右上の「中断」を押してFTPサーバを切ります。
一旦ホーム画面に戻ってEBPocketをもう一度起動し、右下の本が並んだアイコン押すと、コピーした辞書が現れているはずです。これだけで、しかも追加コスト無しで辞書が使えるようになるのは、ちょっと感動的です。

なお、辞書のファイルは、ebzipで圧縮してサイズを小さくすることもできます。今回は、FreeBSDマシン上で、ja-eb (portはjapanese/eb) に入っているebzipコマンドを使って圧縮してみました。
手順は簡単で、基本的にはebzipの引数で辞書ディレクトリを指定するだけですが、今回は以下のオプションを利用しました。
  -k …元のファイルを消去しない
  -l 5 …圧縮レベルを5(最高)にする
  -o …出力先ディレクトリを指定する
出力先ディレクトリは、あらかじめ作っておく必要があります。
  $ '''mkdir destdir'''
  $ '''ebzip -k -l 5 -o destdir srcdir'''
これで、srcdirの中身がdestdirにコピーされ、その過程でHONMONファイルや外字ファイルなどは.ebzの拡張子がついた圧縮ファイルに置き換わります。EBPocketには圧縮後のフォルダを転送すればOKです。
なお、圧縮レベルには0〜5が指定でき、数字が大きいほど圧縮率が高くなりますが、そのぶん圧縮に時間がかかるようになります。実際どのくらい違いがあるのか試してみたところ、もともと519MBの辞書が、圧縮レベル0の場合は約33秒で189MBになり、圧縮レベル5の場合は約42秒で147MBになりました。このくらいの差なら、常にレベル5を指定しておいてもよさそうです。

さて、EBPocketには、有料でより機能が強化されたProfessional版もあります。値段も600円とそれほど高くないので購入してみました。
辞書の転送先フォルダはfree版と独立しているので、データはあらためて転送しなおす必要があります。また、free版と違ってバックグラウンド起動に対応しているので、転送した辞書を認識させるためには一旦EBPocketを明示的に終了する必要があります(ホームに戻ってホームボタンをダブルクリック後、EBPocketアイコンを長押ししてから☓を押す)。
実際使ってみると、
・他のアプリからEBPocketに切り替えたとき、素早く直前の状態に戻る(free版は毎回初期画面からやりなおし)
・インクリメンタルサーチ(1文字入力するごとに該当語を絞り込み)や後方一致検索ができる
・説明文の単語を選んで再検索できる
・検索の履歴が残る
といった、電子辞書として非常に基本的な使い勝手を左右する部分がfree版より優れており、本格的に使うのであればProfessional版は必須であると感じました。

手持ちの辞書を10個ぐらい放り込んだ結果、電子辞書専用機より便利になった部分もあり、SR-G10001の出番はますます減ってしまいそうです。

※バージョンメモ
・iOS 4.3.3
・EBPocket free 1.07
・EBPocket Professional 1.26
・Windows 7 Professional Service Pack 1
・FreeBSD 8.2-RELEASE
・ja-eb-4.4.2_1
