---
layout: default
---
<div class="home">
  {{ content }}

  {%- if site.categories.size > 0 -%}
  <div class="post-list-filter">
    <span class="post-list-filter-reset">すべて表示</span>
    {%- assign categories = site.categories | sort -%}
    {%- for category in categories -%}
    <span class="post-category">{{ category[0] }}</span>
    {%- endfor -%}
  </div>
  {%- endif -%}

  {%- if site.pages.size > 0 -%}
  <ul class="post-list">
    {%- for post in site.pages -%}
    {%- if post.category -%}
    <li class="{%- if post.category -%}{{ post.category }}{%- endif -%}">
      {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
      <span class="post-meta">{{ post.date | date: date_format }}
        {%- if post.update %}
        ({{ post.update | date: date_format }} 更新)
        {%- endif -%}
        <span class="post-category">{{ post.category }}</span>
      </span>
      <h3><a class="post-link" href="{{ post.url | relative_url }}">{{ post.title | escape }}</a></h3>
      {%- if site.show_excerpts -%}
      {{ post.excerpt }}
      {%- endif -%}
    </li>
    {%- endif -%}
    {%- endfor -%}
  </ul>
  {%- endif -%}

  {%- if site.posts.size > 0 -%}
  <h2 class="post-list-heading">記事</h2>
  <ul class="post-list">
    {%- for post in site.posts -%}
    <li class="{%- if post.category -%}{{ post.category }}{%- endif -%}">
      {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
      <span class="post-meta">{{ post.date | date: date_format }}
        {%- if post.update %}
        ({{ post.update | date: date_format }} 更新)
        {%- endif -%}
        {%- if post.category -%}
        <span class="post-category">{{ post.category }}</span>
        {%- endif -%}
      </span>
      <h3><a class="post-link" href="{{ post.url | relative_url }}">{{ post.title | escape }}</a></h3>
      {%- if site.show_excerpts -%}
      {{ post.excerpt }}
      {%- endif -%}
    </li>
    {%- endfor -%}
  </ul>
  {%- endif -%}
</div>

<script>
  function applyFilter() {
    document.querySelectorAll('.post-list-filter .post-category').forEach(span => {
      if (span.textContent === this.textContent) {
        this.classList.remove('post-category-hidden');
      } else {
        span.classList.add("post-category-hidden")
      }
    });
    document.querySelectorAll('.post-list>li').forEach(li => {
      if (li.classList.contains(this.textContent)) {
        li.style.display = 'list-item';
      } else {
        li.style.display = 'none';
      }
    });
  }
  function resetFilter() {
    document.querySelectorAll('.post-list-filter .post-category').forEach(span => {
      span.classList.remove("post-category-hidden")
    });
    document.querySelectorAll('.post-list>li').forEach(li => {
      li.style.display = 'list-item';
    });
  }
  document.querySelectorAll('.post-category').forEach(span => span.onclick = applyFilter);
  document.querySelector('.post-list-filter-reset').onclick = resetFilter;
</script>
